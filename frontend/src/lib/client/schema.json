{"info":{"title":"Purplix.io","version":"0.0.1","termsOfService":"http://localhost/terms-of-service","license":{"name":"GNU Affero General Public License v3.0","identifier":"AGPL-3.0","url":"https://github.com/WardPearce/Purplix.io/blob/main/LICENSE"}},"openapi":"3.1.0","servers":[{"url":"http://localhost/api","description":"Production API"}],"paths":{"/controllers/account/{email}/login":{"post":{"tags":["account"],"summary":"Login","description":"Validate signature and OTP code","operationId":"ControllersAccountEmailLoginLogin","parameters":[{"name":"captcha","in":"query","schema":{"type":"string","examples":[{"description":"Example captcha value","value":""}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"otp","in":"query","schema":{"oneOf":[{"type":"null"},{"type":"string","examples":[{"description":"Example otp value","value":""}]}],"examples":[{"description":"Example otp value","value":""}]},"required":false,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"email","in":"path","schema":{"type":"string","examples":[{"description":"Example email value","value":""}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginSignatureModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserJtiModel"}}}},"401":{"description":"No permission -- see authorization schemes","content":{"application/json":{"schema":{"oneOf":[{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Invalid Captcha","examples":[{"status_code":401,"detail":"Unauthorized","extra":{}}]},{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Invalid Account Auth","examples":[{"status_code":401,"detail":"Unauthorized","extra":{}}]}]}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/{email}/public":{"get":{"tags":["account"],"summary":"Public","description":"Public KDF details","operationId":"ControllersAccountEmailPublicPublic","parameters":[{"name":"email","in":"path","schema":{"type":"string","examples":[{"description":"Example email value","value":"e6"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicUserModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/{email}/to-sign":{"get":{"tags":["account"],"summary":"ToSign","description":"Used to generate a unique code to sign.","operationId":"ControllersAccountEmailToSignToSign","parameters":[{"name":"email","in":"path","schema":{"type":"string","examples":[{"description":"Example email value","value":"5e"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserToSignModel"}}}},"404":{"description":"Nothing matches the given URI","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"User Not Found Exception","examples":[{"status_code":404,"detail":"Not Found","extra":{}}]}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/{email}/email/verify/{email_secret}":{"get":{"tags":["account"],"summary":"VerifyEmail","description":"Verify email for given account","operationId":"ControllersAccountEmailVerifyEmailSecretVerifyEmail","parameters":[{"name":"email","in":"path","schema":{"type":"string","examples":[{"description":"Example email value","value":""}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"email_secret","in":"path","schema":{"type":"string","examples":[{"description":"Example email_secret value","value":"a"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"examples":[]}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/otp/setup":{"post":{"tags":["account"],"summary":"OtpSetup","description":"Used to confirm OTP is completed","operationId":"ControllersAccountOtpSetupOtpSetup","parameters":[{"name":"otp","in":"query","schema":{"type":"string","examples":[{"description":"Example otp value","value":""}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{"examples":[]}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"oneOf":[{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Otp Already Completed","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]},{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}]}}}}},"deprecated":false}},"/controllers/account/otp/reset":{"delete":{"tags":["account"],"summary":"ResetOtp","description":"Reset OTP","operationId":"ControllersAccountOtpResetResetOtp","parameters":[{"name":"otp","in":"query","schema":{"type":"string","examples":[{"description":"Example otp value","value":""}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OtpModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/notifications/webhook/add":{"post":{"tags":["account","notifications","webhook"],"summary":"AddWebhook","description":"Add a webhook","operationId":"ControllersAccountNotificationsWebhookAddAddWebhook","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/notifications/webhook/remove":{"delete":{"tags":["account","notifications","webhook"],"summary":"RemoveWebhook","description":"Remove a webhook","operationId":"ControllersAccountNotificationsWebhookRemoveRemoveWebhook","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookModel"}}},"required":true},"responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/notifications/email/add":{"post":{"tags":["account","notifications"],"summary":"AddEmail","description":"Enable email notification","operationId":"ControllersAccountNotificationsEmailAddAddEmail","requestBody":{"content":{"application/json":{"schema":{"type":"string","enum":["canary_renewals","canary_subscriptions","survey_submissions"],"examples":[{"description":"Example data value","value":"canary_renewals"}]}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/notifications/email/remove":{"delete":{"tags":["account","notifications"],"summary":"RemoveEmail","description":"Disable email notification","operationId":"ControllersAccountNotificationsEmailRemoveRemoveEmail","requestBody":{"content":{"application/json":{"schema":{"type":"string","enum":["canary_renewals","canary_subscriptions","survey_submissions"],"examples":[{"description":"Example data value","value":"canary_renewals"}]}}},"required":true},"responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/privacy/ip-progressing/disallow":{"delete":{"tags":["account","privacy"],"summary":"IpProgressing","operationId":"ControllersAccountPrivacyIpProgressingDisallowIpProgressing","responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}}},"deprecated":false}},"/controllers/account/privacy/ip-progressing/consent":{"post":{"tags":["account","privacy"],"summary":"IpProgressingConsent","operationId":"ControllersAccountPrivacyIpProgressingConsentIpProgressingConsent","responses":{"201":{"description":"Document created, URL follows","headers":{}}},"deprecated":false}},"/controllers/account/create":{"post":{"tags":["account"],"summary":"CreateAccount","description":"Create a user account","operationId":"ControllersAccountCreateCreateAccount","parameters":[{"name":"captcha","in":"query","schema":{"type":"string","examples":[{"description":"Example captcha value","value":""}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{"examples":[]}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/jwt":{"get":{"tags":["account"],"summary":"JwtInfo","description":"Get JWT sub for user","operationId":"ControllersAccountJwtJwtInfo","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"text/plain":{"schema":{"type":"string","examples":[{"description":"Example  value","value":""}]}}}}},"deprecated":false}},"/controllers/account/email/resend":{"post":{"tags":["account"],"summary":"EmailResend","description":"Resends email verification","operationId":"ControllersAccountEmailResendEmailResend","responses":{"201":{"description":"Document created, URL follows","headers":{}}},"deprecated":false}},"/controllers/account/logout":{"delete":{"tags":["account"],"summary":"Logout","description":"Logout of User account","operationId":"ControllersAccountLogoutLogout","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"examples":[]}}}}},"deprecated":false}},"/controllers/account/me":{"get":{"tags":["account"],"summary":"GetMe","description":"Get user info","operationId":"ControllersAccountMeGetMe","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserModel"}}}}},"deprecated":false}},"/controllers/session":{"get":{"tags":["session"],"summary":"GetSessions","description":"List active sessions","operationId":"ControllersSessionGetSessions","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SessionModel"},"type":"array","examples":[]}}}}},"deprecated":false}},"/controllers/session/{session_id}":{"delete":{"tags":["session"],"summary":"InvalidateSession","description":"Invalidate a session","operationId":"ControllersSessionSessionIdInvalidateSession","parameters":[{"name":"session_id","in":"path","schema":{"type":"string","examples":[{"description":"Example session_id value","value":"43"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/create":{"post":{"tags":["canary"],"summary":"CreateCanary","description":"Create a canary for a given domain","operationId":"ControllersCanaryCreateCreateCanary","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCanaryModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CanaryModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/list":{"get":{"tags":["canary"],"summary":"ListCanaries","description":"List canaries for user","operationId":"ControllersCanaryListListCanaries","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CanaryModel"},"type":"array","examples":[]}}}}},"deprecated":false}},"/controllers/canary/trusted/list":{"get":{"tags":["canary"],"summary":"ListTrustedCanaries","description":"List trusted canaries","operationId":"ControllersCanaryTrustedListListTrustedCanaries","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"type":"object","examples":[]}}}}},"deprecated":false}},"/controllers/canary/published/{canary_id}/{page}":{"get":{"tags":["canary","warrant"],"summary":"PublishedWarrant","description":"Get a canary warrant","operationId":"ControllersCanaryPublishedCanaryIdPagePublishedWarrant","parameters":[{"name":"canary_id","in":"path","schema":{"type":"string","examples":[{"description":"Example canary_id value","value":"35"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"page","in":"path","schema":{"type":"integer","examples":[{"description":"Example page value","value":99}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublishedCanaryWarrantModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/warrant/{warrant_id}/publish":{"post":{"tags":["canary","warrant"],"summary":"Publish","description":"Publish a canary","operationId":"ControllersCanaryWarrantWarrantIdPublishPublish","parameters":[{"name":"warrant_id","in":"path","schema":{"type":"string","examples":[{"description":"Example warrant_id value","value":"ad"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublishCanaryWarrantModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/warrant/{warrant_id}/document/{hash_}":{"post":{"tags":["canary","document","warrant"],"summary":"UploadDocument","description":"Upload a canary warrant document","operationId":"ControllersCanaryWarrantWarrantIdDocumentHashUploadDocument","parameters":[{"name":"warrant_id","in":"path","schema":{"type":"string","examples":[{"description":"Example warrant_id value","value":"36"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"hash_","in":"path","schema":{"type":"string","examples":[{"description":"Example hash_ value","value":""}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"multipart/form-data":{"schema":{"items":{"type":"string","format":"binary","contentMediaType":"application/octet-stream","examples":[]},"type":"array","examples":[{"description":"Example data value","value":[]}]}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/create/warrant":{"post":{"tags":["canary","warrant"],"summary":"CreateWarrant","description":"Create a warrant for a canary","operationId":"ControllersCanaryDomainCreateWarrantCreateWarrant","parameters":[{"name":"domain","in":"path","schema":{"type":"string","examples":[{"description":"Example domain value","value":"26"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"otp","in":"query","schema":{"type":"string","examples":[{"description":"Example otp value","value":"12"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCanaryWarrantModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatedCanaryWarrantModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/delete":{"delete":{"tags":["canary"],"summary":"DeleteCanary","description":"Delete a canary","operationId":"ControllersCanaryDomainDeleteDeleteCanary","parameters":[{"name":"domain","in":"path","schema":{"type":"string","examples":[{"description":"Example domain value","value":"7d"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"otp","in":"query","schema":{"type":"string","examples":[{"description":"Example otp value","value":"9"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}":{"get":{"tags":["canary"],"summary":"GetCanary","description":"Get private details about a canary","operationId":"ControllersCanaryDomainGetCanary","parameters":[{"name":"domain","in":"path","schema":{"type":"string","examples":[{"description":"Example domain value","value":""}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CanaryModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/trusted":{"get":{"tags":["canary"],"summary":"GetTrusted","description":"Get signed public key hash for a trusted canary","operationId":"ControllersCanaryDomainTrustedGetTrusted","parameters":[{"name":"domain","in":"path","schema":{"type":"string","examples":[{"description":"Example domain value","value":""}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrustedCanaryModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/public":{"get":{"tags":["canary"],"summary":"PublicCanary","description":"Get public details about canary","operationId":"ControllersCanaryDomainPublicPublicCanary","parameters":[{"name":"domain","in":"path","schema":{"type":"string","examples":[{"description":"Example domain value","value":"6a"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicCanaryModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/trusted/add":{"post":{"tags":["canary"],"summary":"TrustCanary","description":"Saves a canary as a trusted canary","operationId":"ControllersCanaryDomainTrustedAddTrustCanary","parameters":[{"name":"domain","in":"path","schema":{"type":"string","examples":[{"description":"Example domain value","value":"c3"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrustedCanaryModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/logo/update":{"post":{"tags":["canary"],"summary":"UpdateLogo","description":"Update logo for given domain","operationId":"ControllersCanaryDomainLogoUpdateUpdateLogo","parameters":[{"name":"domain","in":"path","schema":{"type":"string","examples":[{"description":"Example domain value","value":"af"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"multipart/form-data":{"schema":{"items":{"type":"string","format":"binary","contentMediaType":"application/octet-stream","examples":[]},"type":"array","examples":[]}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/verify":{"post":{"tags":["canary"],"summary":"Verify","description":"Verify domain ownership via DNS","operationId":"ControllersCanaryDomainVerifyVerify","parameters":[{"name":"domain","in":"path","schema":{"type":"string","examples":[{"description":"Example domain value","value":""}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{"examples":[]}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/subscription/{canary_id}":{"get":{"tags":["canary","subscription"],"summary":"AmSubscribed","description":"Check if user is subscribed to a canary","operationId":"ControllersCanarySubscriptionCanaryIdAmSubscribed","parameters":[{"name":"canary_id","in":"path","schema":{"type":"string","examples":[{"description":"Example canary_id value","value":""}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"type":"boolean","examples":[{"description":"Example  value","value":false}]}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/subscription/{canary_id}/subscribe":{"post":{"tags":["canary","subscription"],"summary":"Subscribe","description":"Subscribe to a canary","operationId":"ControllersCanarySubscriptionCanaryIdSubscribeSubscribe","parameters":[{"name":"canary_id","in":"path","schema":{"type":"string","examples":[{"description":"Example canary_id value","value":"88"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/subscription/{canary_id}/unsubscribe":{"delete":{"tags":["canary","subscription"],"summary":"Unsubscribe","description":"Unsubscribe from a canary","operationId":"ControllersCanarySubscriptionCanaryIdUnsubscribeUnsubscribe","parameters":[{"name":"canary_id","in":"path","schema":{"type":"string","examples":[{"description":"Example canary_id value","value":"90"}]},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}}},"components":{"schemas":{"UserLoginSignatureModel":{"properties":{"signature":{"type":"string","examples":[{"description":"Example signature value","value":""}]},"one_day_login":{"type":"boolean","examples":[{"description":"Example one_day_login value","value":true}]},"_id":{"type":"string","examples":[{"description":"Example _id value","value":""}]}},"type":"object","required":["_id","signature"],"title":"UserLoginSignatureModel","examples":[]},"AccountAuthModal":{"properties":{"public_key":{"type":"string","examples":[{"description":"Example public_key value","value":"52"}]}},"type":"object","required":["public_key"],"title":"AccountAuthModal","examples":[]},"AccountX25519Model":{"properties":{"iv":{"type":"string","examples":[{"description":"Example iv value","value":"5e"}]},"public_key":{"type":"string","examples":[{"description":"Example public_key value","value":"bb"}]},"cipher_text":{"type":"string","examples":[{"description":"Example cipher_text value","value":""}]}},"type":"object","required":["cipher_text","iv","public_key"],"title":"AccountX25519Model","examples":[]},"AccountEd25199Modal":{"properties":{"iv":{"type":"string","examples":[{"description":"Example iv value","value":""}]},"public_key":{"type":"string","examples":[{"description":"Example public_key value","value":"86"}]},"cipher_text":{"type":"string","examples":[{"description":"Example cipher_text value","value":""}]}},"type":"object","required":["cipher_text","iv","public_key"],"title":"AccountEd25199Modal","examples":[]},"AccountKeychainModal":{"properties":{"iv":{"type":"string","examples":[{"description":"Example iv value","value":""}]},"cipher_text":{"type":"string","examples":[{"description":"Example cipher_text value","value":""}]}},"type":"object","required":["cipher_text","iv"],"title":"AccountKeychainModal","examples":[]},"Argon2Modal":{"properties":{"salt":{"type":"string","examples":[{"description":"Example salt value","value":""}]},"time_cost":{"type":"integer","examples":[{"description":"Example time_cost value","value":17}]},"memory_cost":{"type":"integer","examples":[{"description":"Example memory_cost value","value":61}]}},"type":"object","required":["salt"],"title":"Argon2Modal","examples":[]},"OtpModel":{"properties":{"secret":{"oneOf":[{"type":"null"},{"type":"string","examples":[{"description":"Example secret value","value":"f3"}]}],"examples":[{"description":"Example secret value","value":"16"}]},"provisioning_uri":{"oneOf":[{"type":"null"},{"type":"string","examples":[{"description":"Example provisioning_uri value","value":""}]}],"examples":[{"description":"Example provisioning_uri value","value":"0b"}]},"completed":{"type":"boolean","examples":[{"description":"Example completed value","value":false}]}},"type":"object","required":[],"title":"OtpModel","examples":[]},"NotificationsModel":{"properties":{"email":{"items":{"type":"string","enum":["canary_renewals","canary_subscriptions","survey_submissions"],"examples":[{"description":"Example  value","value":"canary_renewals"}]},"type":"array","examples":[{"description":"Example email value","value":[]}]},"webhooks":{"type":"object","examples":[]}},"type":"object","required":["email","webhooks"],"title":"NotificationsModel","examples":[]},"UserModel":{"properties":{"email":{"type":"string","format":"email","examples":[{"description":"Example email value","value":"ghartman@gmail.com"}]},"auth":{"$ref":"#/components/schemas/AccountAuthModal"},"keypair":{"$ref":"#/components/schemas/AccountX25519Model"},"sign_keypair":{"$ref":"#/components/schemas/AccountEd25199Modal"},"keychain":{"$ref":"#/components/schemas/AccountKeychainModal"},"kdf":{"$ref":"#/components/schemas/Argon2Modal"},"ip_lookup_consent":{"type":"boolean","examples":[{"description":"Example ip_lookup_consent value","value":false}]},"signature":{"type":"string","examples":[{"description":"Example signature value","value":"7"}]},"algorithms":{"type":"string","examples":[{"description":"Example algorithms value","value":"4b"}]},"_id":{"examples":[]},"created":{"type":"string","format":"date-time","examples":[{"description":"Example created value","value":"1996-04-16T05:34:46"}]},"otp":{"$ref":"#/components/schemas/OtpModel"},"email_verified":{"type":"boolean","examples":[{"description":"Example email_verified value","value":false}]},"notifications":{"$ref":"#/components/schemas/NotificationsModel"}},"type":"object","required":["_id","auth","created","email","kdf","keychain","keypair","notifications","otp","sign_keypair","signature"],"title":"UserModel","examples":[]},"UserJtiModel":{"properties":{"jti":{"examples":[]},"user":{"$ref":"#/components/schemas/UserModel"}},"type":"object","required":["jti","user"],"title":"UserJtiModel","examples":[]},"PublicUserModel":{"properties":{"kdf":{"$ref":"#/components/schemas/Argon2Modal"},"otp_completed":{"type":"boolean","examples":[{"description":"Example otp_completed value","value":true}]}},"type":"object","required":["kdf"],"title":"PublicUserModel","examples":[]},"UserToSignModel":{"properties":{"to_sign":{"type":"string","examples":[{"description":"Example to_sign value","value":"1"}]},"_id":{"examples":[]}},"type":"object","required":["_id","to_sign"],"title":"UserToSignModel","examples":[]},"WebhookModel":{"properties":{"url":{"type":"string","maxLength":2083,"format":"url","description":"must be a valid HTTP based URL","examples":[{"description":"Example url value","value":"http://stewart-johnson.com/"}]},"type":{"type":"string","enum":["canary_renewals","canary_subscriptions","survey_submissions"],"examples":[{"description":"Example type value","value":"canary_renewals"}]}},"type":"object","required":["type","url"],"title":"WebhookModel","examples":[]},"CreateUserModel":{"properties":{"email":{"type":"string","format":"email","examples":[{"description":"Example email value","value":"frobinson@yahoo.com"}]},"auth":{"$ref":"#/components/schemas/AccountAuthModal"},"keypair":{"$ref":"#/components/schemas/AccountX25519Model"},"sign_keypair":{"$ref":"#/components/schemas/AccountEd25199Modal"},"keychain":{"$ref":"#/components/schemas/AccountKeychainModal"},"kdf":{"$ref":"#/components/schemas/Argon2Modal"},"ip_lookup_consent":{"type":"boolean","examples":[{"description":"Example ip_lookup_consent value","value":false}]},"signature":{"type":"string","examples":[{"description":"Example signature value","value":""}]},"algorithms":{"type":"string","examples":[{"description":"Example algorithms value","value":"3"}]}},"type":"object","required":["auth","email","kdf","keychain","keypair","sign_keypair","signature"],"title":"CreateUserModel","examples":[]},"SessionLocationModel":{"properties":{"region":{"oneOf":[{"type":"null"},{"type":"string","examples":[{"description":"Example region value","value":""}]}],"examples":[{"description":"Example region value","value":"07"}]},"country":{"oneOf":[{"type":"null"},{"type":"string","examples":[{"description":"Example country value","value":""}]}],"examples":[{"description":"Example country value","value":""}]},"ip":{"oneOf":[{"type":"null"},{"type":"string","examples":[{"description":"Example ip value","value":"da"}]}],"examples":[{"description":"Example ip value"}]}},"type":"object","required":[],"title":"SessionLocationModel","examples":[]},"SessionModel":{"properties":{"expires":{"type":"string","format":"date-time","examples":[{"description":"Example expires value","value":"2021-06-14T03:00:00"}]},"record_kept_till":{"type":"string","format":"date-time","examples":[{"description":"Example record_kept_till value","value":"1996-11-17T09:06:46"}]},"created":{"type":"string","format":"date-time","examples":[{"description":"Example created value","value":"2004-10-12T14:01:46"}]},"location":{"$ref":"#/components/schemas/SessionLocationModel"},"device":{"oneOf":[{"type":"null"},{"type":"string","examples":[{"description":"Example device value","value":"b8"}]}],"examples":[{"description":"Example device value","value":"4"}]},"user_id":{"examples":[]},"_id":{"examples":[]}},"type":"object","required":["_id","created","expires","location","record_kept_till","user_id"],"title":"SessionModel","examples":[]},"CanaryEd25519Model":{"properties":{"public_key":{"type":"string","examples":[{"description":"Example public_key value","value":"f1"}]},"iv":{"type":"string","examples":[{"description":"Example iv value","value":"ba"}]},"cipher_text":{"type":"string","examples":[{"description":"Example cipher_text value","value":""}]}},"type":"object","required":["cipher_text","iv","public_key"],"title":"CanaryEd25519Model","examples":[]},"CreateCanaryModel":{"properties":{"domain":{"type":"string","examples":[{"description":"Example domain value","value":"0b"}]},"about":{"type":"string","examples":[{"description":"Example about value","value":"f7"}]},"signature":{"type":"string","examples":[{"description":"Example signature value","value":""}]},"algorithms":{"type":"string","examples":[{"description":"Example algorithms value","value":"a7"}]},"keypair":{"$ref":"#/components/schemas/CanaryEd25519Model"}},"type":"object","required":["about","domain","keypair","signature"],"title":"CreateCanaryModel","examples":[]},"DomainVerification":{"properties":{"completed":{"type":"boolean","examples":[{"description":"Example completed value","value":true}]},"code":{"type":"string","examples":[{"description":"Example code value","value":"1a"}]},"code_prefixed":{"type":"string","examples":[{"description":"Example code_prefixed value","value":"2"}]}},"type":"object","required":["code"],"title":"DomainVerification","examples":[]},"CanaryModel":{"properties":{"domain":{"type":"string","examples":[{"description":"Example domain value","value":""}]},"about":{"type":"string","examples":[{"description":"Example about value","value":"9"}]},"signature":{"type":"string","examples":[{"description":"Example signature value","value":"9"}]},"algorithms":{"type":"string","examples":[{"description":"Example algorithms value","value":""}]},"_id":{"examples":[]},"logo":{"oneOf":[{"type":"null"},{"type":"string","examples":[{"description":"Example logo value","value":"97"}]}],"examples":[{"description":"Example logo value","value":"fe"}]},"user_id":{"examples":[]},"created":{"type":"string","format":"date-time","examples":[{"description":"Example created value","value":"2018-06-02T15:42:58"}]},"keypair":{"$ref":"#/components/schemas/CanaryEd25519Model"},"domain_verification":{"$ref":"#/components/schemas/DomainVerification"}},"type":"object","required":["_id","about","created","domain","domain_verification","keypair","signature","user_id"],"title":"CanaryModel","examples":[]},"DocumentCanaryWarrantModel":{"properties":{"hash":{"type":"string","examples":[{"description":"Example hash value","value":"cb"}]},"filename":{"type":"string","examples":[{"description":"Example filename value","value":""}]},"download_url":{"type":"string","examples":[{"description":"Example download_url value","value":""}]},"file_id":{"type":"string","examples":[{"description":"Example file_id value","value":""}]},"size":{"type":"integer","examples":[{"description":"Example size value","value":58}]}},"type":"object","required":["file_id","filename","hash","size"],"title":"DocumentCanaryWarrantModel","examples":[]},"PublishedCanaryWarrantModel":{"properties":{"_id":{"examples":[]},"next_canary":{"type":"string","format":"date-time","examples":[{"description":"Example next_canary value","value":"2013-10-28T20:33:43"}]},"issued":{"type":"string","format":"date-time","examples":[{"description":"Example issued value","value":"2021-03-21T04:32:00"}]},"signature":{"type":"string","examples":[{"description":"Example signature value","value":"10"}]},"btc_latest_block":{"type":"string","examples":[{"description":"Example btc_latest_block value","value":""}]},"statement":{"type":"string","examples":[{"description":"Example statement value","value":""}]},"concern":{"type":"string","enum":["none","mild","moderate","severe"],"examples":[{"description":"Example concern value","value":"mild"}]},"canary_id":{"examples":[]},"user_id":{"examples":[]},"active":{"type":"boolean","examples":[{"description":"Example active value","value":false}]},"documents":{"items":{"$ref":"#/components/schemas/DocumentCanaryWarrantModel"},"type":"array","examples":[]}},"type":"object","required":["_id","active","btc_latest_block","canary_id","concern","documents","issued","next_canary","signature","user_id"],"title":"PublishedCanaryWarrantModel","examples":[]},"PublishCanaryWarrantModel":{"properties":{"signature":{"type":"string","examples":[{"description":"Example signature value","value":""}]},"btc_latest_block":{"type":"string","examples":[{"description":"Example btc_latest_block value","value":""}]},"statement":{"type":"string","examples":[{"description":"Example statement value","value":"4b"}]},"concern":{"type":"string","enum":["none","mild","moderate","severe"],"examples":[{"description":"Example concern value","value":"none"}]}},"type":"object","required":["btc_latest_block","concern","signature"],"title":"PublishCanaryWarrantModel","examples":[]},"CreateCanaryWarrantModel":{"properties":{"next":{"type":"string","enum":["tomorrow","week","fortnight","month","quarter","year"],"examples":[{"description":"Example next value","value":"week"}]}},"type":"object","required":["next"],"title":"CreateCanaryWarrantModel","examples":[]},"CreatedCanaryWarrantModel":{"properties":{"_id":{"examples":[]},"next_canary":{"type":"string","format":"date-time","examples":[{"description":"Example next_canary value","value":"2005-09-07T14:08:35"}]},"issued":{"type":"string","format":"date-time","examples":[{"description":"Example issued value","value":"2015-02-27T11:05:18"}]}},"type":"object","required":["_id","issued","next_canary"],"title":"CreatedCanaryWarrantModel","examples":[]},"TrustedCanaryModel":{"properties":{"public_key_hash":{"type":"string","examples":[{"description":"Example public_key_hash value","value":"5d"}]},"signature":{"type":"string","examples":[{"description":"Example signature value","value":""}]}},"type":"object","required":["public_key_hash","signature"],"title":"TrustedCanaryModel","examples":[]},"PublicKeyModel":{"properties":{"public_key":{"type":"string","examples":[{"description":"Example public_key value","value":""}]}},"type":"object","required":["public_key"],"title":"PublicKeyModel","examples":[]},"PublicCanaryModel":{"properties":{"domain":{"type":"string","examples":[{"description":"Example domain value","value":"9f"}]},"about":{"type":"string","examples":[{"description":"Example about value","value":"4b"}]},"signature":{"type":"string","examples":[{"description":"Example signature value","value":""}]},"algorithms":{"type":"string","examples":[{"description":"Example algorithms value","value":""}]},"_id":{"examples":[]},"logo":{"oneOf":[{"type":"null"},{"type":"string","examples":[{"description":"Example logo value","value":""}]}],"examples":[{"description":"Example logo value","value":""}]},"user_id":{"examples":[]},"created":{"type":"string","format":"date-time","examples":[{"description":"Example created value","value":"2009-02-23T23:06:23"}]},"keypair":{"$ref":"#/components/schemas/PublicKeyModel"}},"type":"object","required":["_id","about","created","domain","keypair","signature","user_id"],"title":"PublicCanaryModel","examples":[]}},"securitySchemes":{"BearerToken":{"type":"http","description":"JWT cookie-based authentication and authorization.","name":"token","in":"cookie","scheme":"Bearer","bearerFormat":"JWT"}}},"security":[{"BearerToken":[]}]}