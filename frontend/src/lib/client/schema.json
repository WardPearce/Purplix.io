{"info":{"title":"Purplix.io","version":"0.0.1","termsOfService":"https://localhost/terms-of-service","license":{"name":"GNU Affero General Public License v3.0","identifier":"AGPL-3.0","url":"https://github.com/WardPearce/Purplix.io/blob/main/LICENSE"}},"openapi":"3.1.0","servers":[{"url":"https://localhost/api","description":"Production API"}],"paths":{"/controllers/account/{email}/login":{"post":{"tags":["account"],"summary":"Login","description":"Validate signature and OTP code","operationId":"ControllersAccountEmailLoginLogin","parameters":[{"name":"otp","in":"query","schema":{"oneOf":[{"type":"null"},{"type":"string"}]},"required":false,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"email","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"captcha","in":"query","schema":{"oneOf":[{"type":"null"},{"type":"string"}]},"required":false,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginSignatureModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserJtiModel"}}}},"401":{"description":"No permission -- see authorization schemes","content":{"application/json":{"schema":{"oneOf":[{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Invalid Captcha","examples":[{"status_code":401,"detail":"Unauthorized","extra":{}}]},{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Invalid Account Auth","examples":[{"status_code":401,"detail":"Unauthorized","extra":{}}]}]}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/{email}/to-sign":{"get":{"tags":["account"],"summary":"ToSign","description":"Used to generate a unique code to sign.","operationId":"ControllersAccountEmailToSignToSign","parameters":[{"name":"email","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserToSignModel"}}}},"404":{"description":"Nothing matches the given URI","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"User Not Found Exception","examples":[{"status_code":404,"detail":"Not Found","extra":{}}]}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/{email}/public":{"get":{"tags":["account"],"summary":"Public","description":"Public KDF details","operationId":"ControllersAccountEmailPublicPublic","parameters":[{"name":"email","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicUserModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/{email}/email/verify/{email_secret}":{"get":{"tags":["account"],"summary":"VerifyEmail","description":"Verify email for given account","operationId":"ControllersAccountEmailVerifyEmailSecretVerifyEmail","parameters":[{"name":"email","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"email_secret","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Redirect Response","headers":{"location":{"schema":{"type":"string"},"name":"","in":"header","description":"target path for the redirect","required":false,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/otp/reset":{"delete":{"tags":["account"],"summary":"ResetOtp","description":"Reset OTP","operationId":"ControllersAccountOtpResetResetOtp","parameters":[{"name":"otp","in":"query","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OtpModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/otp/setup":{"post":{"tags":["account"],"summary":"OtpSetup","description":"Used to confirm OTP is completed","operationId":"ControllersAccountOtpSetupOtpSetup","parameters":[{"name":"otp","in":"query","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"oneOf":[{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Otp Already Completed","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]},{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}]}}}}},"deprecated":false}},"/controllers/account/notifications/webhook/add":{"post":{"tags":["account","notifications","webhook"],"summary":"AddWebhook","description":"Add a webhook","operationId":"ControllersAccountNotificationsWebhookAddAddWebhook","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/notifications/webhook/remove":{"delete":{"tags":["account","notifications","webhook"],"summary":"RemoveWebhook","description":"Remove a webhook","operationId":"ControllersAccountNotificationsWebhookRemoveRemoveWebhook","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookModel"}}},"required":true},"responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/notifications/email/add":{"post":{"tags":["account","notifications"],"summary":"AddEmail","description":"Enable email notification","operationId":"ControllersAccountNotificationsEmailAddAddEmail","requestBody":{"content":{"application/json":{"schema":{"type":"string","enum":["canary_renewals","canary_subscriptions","survey_submissions"]}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/notifications/email/remove":{"delete":{"tags":["account","notifications"],"summary":"RemoveEmail","description":"Disable email notification","operationId":"ControllersAccountNotificationsEmailRemoveRemoveEmail","requestBody":{"content":{"application/json":{"schema":{"type":"string","enum":["canary_renewals","canary_subscriptions","survey_submissions"]}}},"required":true},"responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/privacy/ip-progressing/disallow":{"delete":{"tags":["account","privacy"],"summary":"IpProgressing","operationId":"ControllersAccountPrivacyIpProgressingDisallowIpProgressing","responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}}},"deprecated":false}},"/controllers/account/privacy/ip-progressing/consent":{"post":{"tags":["account","privacy"],"summary":"IpProgressingConsent","operationId":"ControllersAccountPrivacyIpProgressingConsentIpProgressingConsent","responses":{"201":{"description":"Document created, URL follows","headers":{}}},"deprecated":false}},"/controllers/account/create":{"post":{"tags":["account"],"summary":"CreateAccount","description":"Create a user account","operationId":"ControllersAccountCreateCreateAccount","parameters":[{"name":"captcha","in":"query","schema":{"oneOf":[{"type":"null"},{"type":"string"}]},"required":false,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/account/jwt":{"get":{"tags":["account"],"summary":"JwtInfo","description":"Get JWT sub for user","operationId":"ControllersAccountJwtJwtInfo","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"text/plain":{"schema":{"type":"string"}}}}},"deprecated":false}},"/controllers/account/email/resend":{"post":{"tags":["account"],"summary":"EmailResend","description":"Resends email verification","operationId":"ControllersAccountEmailResendEmailResend","responses":{"201":{"description":"Document created, URL follows","headers":{}}},"deprecated":false}},"/controllers/account/logout":{"delete":{"tags":["account"],"summary":"Logout","description":"Logout of User account","operationId":"ControllersAccountLogoutLogout","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{}}}}},"deprecated":false}},"/controllers/account/me":{"get":{"tags":["account"],"summary":"GetMe","description":"Get user info","operationId":"ControllersAccountMeGetMe","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserModel"}}}}},"deprecated":false}},"/controllers/account/password/reset":{"post":{"tags":["account"],"summary":"PasswordReset","description":"Reset password","operationId":"ControllersAccountPasswordResetPasswordReset","parameters":[{"name":"otp","in":"query","schema":{"oneOf":[{"type":"null"},{"type":"string"}]},"required":false,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountUpdatePassword"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/session":{"get":{"tags":["session"],"summary":"GetSessions","description":"List active sessions","operationId":"ControllersSessionGetSessions","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SessionModel"},"type":"array"}}}}},"deprecated":false}},"/controllers/session/{session_id}":{"delete":{"tags":["session"],"summary":"InvalidateSession","description":"Invalidate a session","operationId":"ControllersSessionSessionIdInvalidateSession","parameters":[{"name":"session_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/create":{"post":{"tags":["canary"],"summary":"CreateCanary","description":"Create a canary for a given domain","operationId":"ControllersCanaryCreateCreateCanary","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCanaryModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CanaryModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/list":{"get":{"tags":["canary"],"summary":"ListCanaries","description":"List canaries for user","operationId":"ControllersCanaryListListCanaries","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CanaryModel"},"type":"array"}}}}},"deprecated":false}},"/controllers/canary/trusted/list":{"get":{"tags":["canary"],"summary":"ListTrustedCanaries","description":"List trusted canaries","operationId":"ControllersCanaryTrustedListListTrustedCanaries","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"additionalProperties":{"$ref":"#/components/schemas/TrustedCanaryModel"},"type":"object"}}}}},"deprecated":false}},"/controllers/canary/published/{canary_id}/{page}":{"get":{"tags":["canary","warrant"],"summary":"PublishedWarrant","description":"Get a canary warrant","operationId":"ControllersCanaryPublishedCanaryIdPagePublishedWarrant","parameters":[{"name":"canary_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"page","in":"path","schema":{"type":"integer"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublishedCanaryWarrantModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/warrant/{warrant_id}/publish":{"post":{"tags":["canary","warrant"],"summary":"Publish","description":"Publish a canary","operationId":"ControllersCanaryWarrantWarrantIdPublishPublish","parameters":[{"name":"warrant_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublishCanaryWarrantModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/warrant/{warrant_id}/document/{hash_}":{"post":{"tags":["canary","document","warrant"],"summary":"UploadDocument","description":"Upload a canary warrant document","operationId":"ControllersCanaryWarrantWarrantIdDocumentHashUploadDocument","parameters":[{"name":"warrant_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"hash_","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"multipart/form-data":{"schema":{"items":{"type":"string","contentMediaType":"application/octet-stream"},"type":"array"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/logo/update":{"post":{"tags":["canary"],"summary":"UpdateLogo","description":"Update logo for given domain","operationId":"ControllersCanaryDomainLogoUpdateUpdateLogo","parameters":[{"name":"domain","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"multipart/form-data":{"schema":{"items":{"type":"string","contentMediaType":"application/octet-stream"},"type":"array"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/public":{"get":{"tags":["canary"],"summary":"PublicCanary","description":"Get public details about canary","operationId":"ControllersCanaryDomainPublicPublicCanary","parameters":[{"name":"domain","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicCanaryModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/create/warrant":{"post":{"tags":["canary","warrant"],"summary":"CreateWarrant","description":"Create a warrant for a canary","operationId":"ControllersCanaryDomainCreateWarrantCreateWarrant","parameters":[{"name":"domain","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"otp","in":"query","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCanaryWarrantModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatedCanaryWarrantModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/verify":{"post":{"tags":["canary"],"summary":"Verify","description":"Verify domain ownership via DNS","operationId":"ControllersCanaryDomainVerifyVerify","parameters":[{"name":"domain","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/delete":{"delete":{"tags":["canary"],"summary":"DeleteCanary","description":"Delete a canary","operationId":"ControllersCanaryDomainDeleteDeleteCanary","parameters":[{"name":"domain","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"otp","in":"query","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}":{"get":{"tags":["canary"],"summary":"GetCanary","description":"Get private details about a canary","operationId":"ControllersCanaryDomainGetCanary","parameters":[{"name":"domain","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CanaryModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/trusted":{"get":{"tags":["canary"],"summary":"GetTrusted","description":"Get signed public key hash for a trusted canary","operationId":"ControllersCanaryDomainTrustedGetTrusted","parameters":[{"name":"domain","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrustedCanaryModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/{domain}/trusted/add":{"post":{"tags":["canary"],"summary":"TrustCanary","description":"Saves a canary as a trusted canary","operationId":"ControllersCanaryDomainTrustedAddTrustCanary","parameters":[{"name":"domain","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrustedCanaryModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/subscription/{canary_id}/subscribe":{"post":{"tags":["canary","subscription"],"summary":"Subscribe","description":"Subscribe to a canary","operationId":"ControllersCanarySubscriptionCanaryIdSubscribeSubscribe","parameters":[{"name":"canary_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/subscription/{canary_id}":{"get":{"tags":["canary","subscription"],"summary":"AmSubscribed","description":"Check if user is subscribed to a canary","operationId":"ControllersCanarySubscriptionCanaryIdAmSubscribed","parameters":[{"name":"canary_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"type":"boolean"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/canary/subscription/{canary_id}/unsubscribe":{"delete":{"tags":["canary","subscription"],"summary":"Unsubscribe","description":"Unsubscribe from a canary","operationId":"ControllersCanarySubscriptionCanaryIdUnsubscribeUnsubscribe","parameters":[{"name":"canary_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"204":{"description":"Request fulfilled, nothing follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/survey/{survey_id}/responses":{"get":{"tags":["survey"],"summary":"StreamResponses","description":"Stream survey responses using ndjson (not realtime)","operationId":"ControllersSurveySurveyIdResponsesStreamResponses","parameters":[{"name":"survey_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Stream Response","headers":{"content-length":{"schema":{"type":"string"},"name":"","in":"header","description":"File size in bytes","required":false,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},"last-modified":{"schema":{"type":"string","format":"date-time"},"name":"","in":"header","description":"Last modified data-time in RFC 2822 format","required":false,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},"etag":{"schema":{"type":"string"},"name":"","in":"header","description":"Entity tag","required":false,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}},"content":{"":{"schema":{"type":"string","contentMediaType":"application/octet-stream"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/survey/{survey_id}/close":{"post":{"tags":["survey"],"summary":"CloseSurvey","description":"Closes survey submission, also clears IP hashes","operationId":"ControllersSurveySurveyIdCloseCloseSurvey","parameters":[{"name":"survey_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"201":{"description":"Document created, URL follows","headers":{}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/survey/{survey_id}/public":{"get":{"tags":["survey"],"summary":"PublicSurvey","description":"Get a survey public details","operationId":"ControllersSurveySurveyIdPublicPublicSurvey","parameters":[{"name":"survey_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyPublicModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/survey/{survey_id}/submit":{"post":{"tags":["survey"],"summary":"SubmitSurvey","description":"Submit answers to a survey","operationId":"ControllersSurveySurveyIdSubmitSubmitSurvey","parameters":[{"name":"survey_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"captcha","in":"query","schema":{"oneOf":[{"type":"null"},{"type":"string"}]},"required":false,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmitSurveyModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/survey/{survey_id}/responses/{page}":{"get":{"tags":["survey"],"summary":"GetResponse","description":"Get a survey response","operationId":"ControllersSurveySurveyIdResponsesPageGetResponse","parameters":[{"name":"survey_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false},{"name":"page","in":"path","schema":{"type":"integer"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyResultModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/survey/{survey_id}":{"get":{"tags":["survey"],"summary":"GetSurvey","description":"Get a survey","operationId":"ControllersSurveySurveyIdGetSurvey","parameters":[{"name":"survey_id","in":"path","schema":{"type":"string"},"required":true,"deprecated":false,"allowEmptyValue":false,"allowReserved":false}],"responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/survey/create":{"post":{"tags":["survey"],"summary":"CreateSurvey","description":"Create a survey","operationId":"ControllersSurveyCreateCreateSurvey","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyCreateModel"}}},"required":true},"responses":{"201":{"description":"Document created, URL follows","headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyModel"}}}},"400":{"description":"Bad request syntax or unsupported method","content":{"application/json":{"schema":{"properties":{"status_code":{"type":"integer"},"detail":{"type":"string"},"extra":{"additionalProperties":{},"type":["null","object","array"]}},"type":"object","required":["detail","status_code"],"description":"Validation Exception","examples":[{"status_code":400,"detail":"Bad Request","extra":{}}]}}}}},"deprecated":false}},"/controllers/survey/list":{"get":{"tags":["survey"],"summary":"ListSurveys","description":"List surveys","operationId":"ControllersSurveyListListSurveys","responses":{"200":{"description":"Request fulfilled, document follows","headers":{},"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SurveyModel"},"type":"array"}}}}},"deprecated":false}},"/controllers/csrf":{"get":{"summary":"CsrfGet","description":"Get a CSRF token to use in later requests","operationId":"ControllersCsrfCsrfGet","responses":{"200":{"description":"Request fulfilled, document follows","headers":{}}},"deprecated":false}}},"components":{"schemas":{"UserLoginSignatureModel":{"properties":{"signature":{"type":"string","description":"to_sign signed with ed25519 private key, base64 encoded"},"one_day_login":{"type":"boolean","description":"Overwrites the default JWT expire days to only one day"},"_id":{"type":"string"}},"type":"object","required":["_id","signature"],"title":"UserLoginSignatureModel"},"AccountAuthModal":{"properties":{"public_key":{"type":"string","maxLength":44,"description":"ed25519 public key, base64 encoded"}},"type":"object","required":["public_key"],"title":"AccountAuthModal"},"AccountX25519Model":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"public_key":{"type":"string","maxLength":44,"description":"X25519 public key, base64 encoded"},"cipher_text":{"type":"string","maxLength":240,"description":"X25519 private key, encrypted with keychain, base64 encoded"}},"type":"object","required":["cipher_text","iv","public_key"],"title":"AccountX25519Model"},"AccountEd25199Modal":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"public_key":{"type":"string","maxLength":44,"description":"ed25519 public key, base64 encoded"},"cipher_text":{"type":"string","maxLength":240,"description":"ed25519 private key, encrypted with keychain, base64 encoded"}},"type":"object","required":["cipher_text","iv","public_key"],"title":"AccountEd25199Modal"},"AccountKeychainModal":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"cipher_text":{"type":"string","maxLength":82,"description":"Locally encrypted 32 byte key for keychain, base64 encoded"}},"type":"object","required":["cipher_text","iv"],"title":"AccountKeychainModal"},"Argon2Modal":{"properties":{"salt":{"type":"string","maxLength":64,"description":"Salt used for deriving account key, base64 encoded"},"time_cost":{"type":"integer","maximum":12,"minimum":2,"description":"Time cost"},"memory_cost":{"type":"integer","maximum":3355443200,"minimum":65535,"description":"Memory cost"}},"type":"object","required":["salt"],"title":"Argon2Modal"},"OtpModel":{"properties":{"secret":{"oneOf":[{"type":"null"},{"type":"string"}]},"provisioning_uri":{"oneOf":[{"type":"null"},{"type":"string"}]},"completed":{"type":"boolean"}},"type":"object","required":[],"title":"OtpModel"},"NotificationsModel":{"properties":{"email":{"items":{"type":"string","enum":["canary_renewals","canary_subscriptions","survey_submissions"]},"type":"array","maxItems":3},"webhooks":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"}},"type":"object","required":["email","webhooks"],"title":"NotificationsModel"},"UserModel":{"properties":{"auth":{"$ref":"#/components/schemas/AccountAuthModal"},"keypair":{"$ref":"#/components/schemas/AccountX25519Model"},"sign_keypair":{"$ref":"#/components/schemas/AccountEd25199Modal"},"keychain":{"$ref":"#/components/schemas/AccountKeychainModal"},"kdf":{"$ref":"#/components/schemas/Argon2Modal"},"signature":{"type":"string","maxLength":128,"description":"Locally signed with ed25519 private key to validate account data hasn't been changed. Base64 encoded"},"email":{"type":"string","format":"email"},"ip_lookup_consent":{"type":"boolean"},"algorithms":{"type":"string","maxLength":120,"description":"Algorithms used by client."},"id":{},"created":{"type":"string","format":"date-time"},"otp":{"$ref":"#/components/schemas/OtpModel"},"email_verified":{"type":"boolean"},"notifications":{"$ref":"#/components/schemas/NotificationsModel"}},"type":"object","required":["auth","created","email","id","kdf","keychain","keypair","notifications","otp","sign_keypair","signature"],"title":"UserModel"},"UserJtiModel":{"properties":{"jti":{},"user":{"$ref":"#/components/schemas/UserModel"}},"type":"object","required":["jti","user"],"title":"UserJtiModel"},"UserToSignModel":{"properties":{"to_sign":{"type":"string","description":"to be signed with ed25519 private key"},"id":{}},"type":"object","required":["id","to_sign"],"title":"UserToSignModel"},"PublicUserModel":{"properties":{"kdf":{"$ref":"#/components/schemas/Argon2Modal"},"otp_completed":{"type":"boolean"}},"type":"object","required":["kdf"],"title":"PublicUserModel"},"WebhookModel":{"properties":{"url":{},"type":{"type":"string","enum":["canary_renewals","canary_subscriptions","survey_submissions"]}},"type":"object","required":["type","url"],"title":"WebhookModel"},"CreateUserModel":{"properties":{"auth":{"$ref":"#/components/schemas/AccountAuthModal"},"keypair":{"$ref":"#/components/schemas/AccountX25519Model"},"sign_keypair":{"$ref":"#/components/schemas/AccountEd25199Modal"},"keychain":{"$ref":"#/components/schemas/AccountKeychainModal"},"kdf":{"$ref":"#/components/schemas/Argon2Modal"},"signature":{"type":"string","maxLength":128,"description":"Locally signed with ed25519 private key to validate account data hasn't been changed. Base64 encoded"},"email":{"type":"string","format":"email"},"ip_lookup_consent":{"type":"boolean"},"algorithms":{"type":"string","maxLength":120,"description":"Algorithms used by client."}},"type":"object","required":["auth","email","kdf","keychain","keypair","sign_keypair","signature"],"title":"CreateUserModel"},"AccountUpdatePassword":{"properties":{"auth":{"$ref":"#/components/schemas/AccountAuthModal"},"keypair":{"$ref":"#/components/schemas/AccountX25519Model"},"sign_keypair":{"$ref":"#/components/schemas/AccountEd25199Modal"},"keychain":{"$ref":"#/components/schemas/AccountKeychainModal"},"kdf":{"$ref":"#/components/schemas/Argon2Modal"},"signature":{"type":"string","maxLength":128,"description":"Locally signed with ed25519 private key to validate account data hasn't been changed. Base64 encoded"}},"type":"object","required":["auth","kdf","keychain","keypair","sign_keypair","signature"],"title":"AccountUpdatePassword"},"SessionLocationModel":{"properties":{"region":{"oneOf":[{"type":"null"},{"type":"string"}]},"country":{"oneOf":[{"type":"null"},{"type":"string"}]},"ip":{"oneOf":[{"type":"null"},{"type":"string"}]}},"type":"object","required":[],"title":"SessionLocationModel"},"SessionModel":{"properties":{"expires":{"type":"string","format":"date-time"},"record_kept_till":{"type":"string","format":"date-time"},"created":{"type":"string","format":"date-time"},"location":{"$ref":"#/components/schemas/SessionLocationModel"},"device":{"oneOf":[{"type":"null"},{"type":"string"}]},"user_id":{},"id":{}},"type":"object","required":["created","expires","id","location","record_kept_till","user_id"],"title":"SessionModel"},"CanaryEd25519Model":{"properties":{"public_key":{"type":"string","maxLength":44,"description":"ed25519 public key, base64 encoded"},"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"cipher_text":{"type":"string","maxLength":240,"description":"ed25519 private key, encrypted with keychain, base64 encoded"}},"type":"object","required":["cipher_text","iv","public_key"],"title":"CanaryEd25519Model"},"CreateCanaryModel":{"properties":{"domain":{"type":"string","pattern":"(?i)^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+(?:[a-zA-Z]{2,})$"},"about":{"type":"string","maxLength":500},"signature":{"type":"string","maxLength":128},"algorithms":{"type":"string","maxLength":120,"description":"Algorithms used for canary"},"hex_color":{"oneOf":[{"type":"null"},{"type":"string"}],"pattern":"^[0-9a-fA-F]{6}$"},"keypair":{"$ref":"#/components/schemas/CanaryEd25519Model"}},"type":"object","required":["about","domain","keypair","signature"],"title":"CreateCanaryModel"},"DomainVerification":{"properties":{"completed":{"type":"boolean"},"code":{"type":"string"},"code_prefixed":{"type":"string"}},"type":"object","required":["code"],"title":"DomainVerification"},"CanaryModel":{"properties":{"domain":{"type":"string","pattern":"(?i)^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+(?:[a-zA-Z]{2,})$"},"about":{"type":"string","maxLength":500},"signature":{"type":"string","maxLength":128},"algorithms":{"type":"string","maxLength":120,"description":"Algorithms used for canary"},"hex_color":{"oneOf":[{"type":"null"},{"type":"string"}],"pattern":"^[0-9a-fA-F]{6}$"},"id":{},"logo":{"oneOf":[{"type":"null"},{"type":"string"}]},"user_id":{},"created":{"type":"string","format":"date-time"},"keypair":{"$ref":"#/components/schemas/CanaryEd25519Model"},"domain_verification":{"$ref":"#/components/schemas/DomainVerification"}},"type":"object","required":["about","created","domain","domain_verification","id","keypair","signature","user_id"],"title":"CanaryModel"},"TrustedCanaryModel":{"properties":{"public_key_hash":{"type":"string"},"signature":{"type":"string","maxLength":240,"description":"Domain & public key hash signature, base64 encoded"}},"type":"object","required":["public_key_hash","signature"],"title":"TrustedCanaryModel"},"DocumentCanaryWarrantModel":{"properties":{"hash_":{"type":"string"},"filename":{"type":"string"},"download_url":{"type":"string"},"file_id":{"type":"string"},"size":{"type":"integer"}},"type":"object","required":["file_id","filename","hash_","size"],"title":"DocumentCanaryWarrantModel"},"PublishedCanaryWarrantModel":{"properties":{"id":{},"next_canary":{"type":"string","format":"date-time"},"issued":{"type":"string","format":"date-time"},"signature":{"type":"string","maxLength":240,"description":"Hash signature, base64 encoded"},"btc_latest_block":{"type":"string","maxLength":64},"statement":{"type":"string","maxLength":5500},"concern":{"type":"string","enum":["none","mild","moderate","severe"]},"canary_id":{},"user_id":{},"active":{"type":"boolean"},"documents":{"items":{"$ref":"#/components/schemas/DocumentCanaryWarrantModel"},"type":"array"}},"type":"object","required":["active","btc_latest_block","canary_id","concern","documents","id","issued","next_canary","signature","user_id"],"title":"PublishedCanaryWarrantModel"},"PublishCanaryWarrantModel":{"properties":{"signature":{"type":"string","maxLength":240,"description":"Hash signature, base64 encoded"},"btc_latest_block":{"type":"string","maxLength":64},"statement":{"type":"string","maxLength":5500},"concern":{"type":"string","enum":["none","mild","moderate","severe"]}},"type":"object","required":["btc_latest_block","concern","signature"],"title":"PublishCanaryWarrantModel"},"PublicKeyModel":{"properties":{"public_key":{"type":"string","maxLength":44,"description":"ed25519 public key, base64 encoded"}},"type":"object","required":["public_key"],"title":"PublicKeyModel"},"PublicCanaryModel":{"properties":{"domain":{"type":"string","pattern":"(?i)^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+(?:[a-zA-Z]{2,})$"},"about":{"type":"string","maxLength":500},"signature":{"type":"string","maxLength":128},"algorithms":{"type":"string","maxLength":120,"description":"Algorithms used for canary"},"hex_color":{"oneOf":[{"type":"null"},{"type":"string"}],"pattern":"^[0-9a-fA-F]{6}$"},"id":{},"logo":{"oneOf":[{"type":"null"},{"type":"string"}]},"user_id":{},"created":{"type":"string","format":"date-time"},"keypair":{"$ref":"#/components/schemas/PublicKeyModel"}},"type":"object","required":["about","created","domain","id","keypair","signature","user_id"],"title":"PublicCanaryModel"},"CreateCanaryWarrantModel":{"properties":{"next":{"type":"string","enum":["tomorrow","week","fortnight","month","quarter","year"]}},"type":"object","required":["next"],"title":"CreateCanaryWarrantModel"},"CreatedCanaryWarrantModel":{"properties":{"id":{},"next_canary":{"type":"string","format":"date-time"},"issued":{"type":"string","format":"date-time"}},"type":"object","required":["id","issued","next_canary"],"title":"CreatedCanaryWarrantModel"},"TitleModel":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"cipher_text":{"type":"string","maxLength":128}},"type":"object","required":["cipher_text","iv"],"title":"TitleModel"},"SurveyDescriptionModel":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"cipher_text":{"type":"string","maxLength":1024}},"type":"object","required":["cipher_text","iv"],"title":"SurveyDescriptionModel"},"SurveyRegexModel":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"cipher_text":{"type":"string","maxLength":128}},"type":"object","required":["cipher_text","iv"],"title":"SurveyRegexModel"},"SurveyQuestionsModel":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"cipher_text":{"type":"string","maxLength":256}},"type":"object","required":["cipher_text","iv"],"title":"SurveyQuestionsModel"},"SurveyChoicesModel":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"id":{"type":"integer","exclusiveMaximum":1024.0,"minimum":0.0},"cipher_text":{"type":"string","maxLength":512}},"type":"object","required":["cipher_text","id","iv"],"title":"SurveyChoicesModel"},"SurveyQuestionModel":{"properties":{"id":{"type":"integer","exclusiveMaximum":1024.0,"minimum":0.0},"regex":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/SurveyRegexModel"}]},"description":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/SurveyDescriptionModel"}]},"question":{"$ref":"#/components/schemas/SurveyQuestionsModel"},"choices":{"oneOf":[{"type":"null"},{"items":{"$ref":"#/components/schemas/SurveyChoicesModel"},"type":"array"}]},"required":{"type":"boolean"},"type":{"type":"integer","enum":[0,1,2,3]}},"type":"object","required":["id","question","type"],"title":"SurveyQuestionModel"},"SurveySignPublicKeyModel":{"properties":{"public_key":{"type":"string","maxLength":44,"description":"ed25519 public key, base64 encoded"}},"type":"object","required":["public_key"],"title":"SurveySignPublicKeyModel"},"SurveyKeypairCipherModel":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"cipher_text":{"type":"string","maxLength":240}},"type":"object","required":["cipher_text","iv"],"title":"SurveyKeypairCipherModel"},"SurveyPublicKeyModel":{"properties":{"public_key":{"$ref":"#/components/schemas/SurveyKeypairCipherModel"}},"type":"object","required":["public_key"],"title":"SurveyPublicKeyModel"},"SurreyCreateIpModel":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"key":{"type":"string","maxLength":255},"cipher_text":{"type":"string","maxLength":64}},"type":"object","required":["cipher_text","iv","key"],"title":"SurreyCreateIpModel"},"SurveyPublicModel":{"properties":{"title":{"$ref":"#/components/schemas/TitleModel"},"description":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/SurveyDescriptionModel"}]},"questions":{"items":{"$ref":"#/components/schemas/SurveyQuestionModel"},"type":"array","maxItems":128},"signature":{"type":"string","maxLength":128},"requires_login":{"type":"boolean"},"proxy_block":{"type":"boolean"},"allow_multiple_submissions":{"type":"boolean"},"closed":{"oneOf":[{"type":"boolean"},{"type":"string","format":"date-time"}]},"requires_captcha":{"type":"boolean"},"hex_color":{"oneOf":[{"type":"null"},{"type":"string"}],"pattern":"^[0-9a-fA-F]{6}$"},"algorithms":{"type":"string","description":"Encryption algorithms used for survey"},"created":{"type":"string","format":"date-time"},"id":{},"user_id":{},"sign_keypair":{"$ref":"#/components/schemas/SurveySignPublicKeyModel"},"keypair":{"$ref":"#/components/schemas/SurveyPublicKeyModel"},"ip":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/SurreyCreateIpModel"}]}},"type":"object","required":["created","id","keypair","questions","sign_keypair","signature","title","user_id"],"title":"SurveyPublicModel"},"SurveyAnswerModel":{"properties":{"id":{"type":"integer","exclusiveMaximum":1024.0,"minimum":0.0},"answer":{"oneOf":[{"items":{"type":"string"},"type":"array"},{"type":"string"}]},"type":{"type":"integer","enum":[0,1,2,3]}},"type":"object","required":["answer","id","type"],"title":"SurveyAnswerModel"},"SubmitSurveyModel":{"properties":{"answers":{"items":{"$ref":"#/components/schemas/SurveyAnswerModel"},"type":"array","maxItems":128,"minItems":1},"ip_key":{"oneOf":[{"type":"null"},{"type":"string"}]}},"type":"object","required":["answers"],"title":"SubmitSurveyModel"},"SurveyResultModel":{"properties":{"answers":{"items":{"$ref":"#/components/schemas/SurveyAnswerModel"},"type":"array","maxItems":128,"minItems":1},"survey_id":{},"created":{"type":"string","format":"date-time"}},"type":"object","required":["answers","created","survey_id"],"title":"SurveyResultModel"},"SurveySignKeyPairModel":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"public_key":{"type":"string","maxLength":44,"description":"ed25519 public key, base64 encoded"},"cipher_text":{"type":"string","maxLength":240,"description":"ed25519 private key, encrypted with keychain, base64 encoded"}},"type":"object","required":["cipher_text","iv","public_key"],"title":"SurveySignKeyPairModel"},"SurveySecretKeyModel":{"properties":{"iv":{"type":"string","maxLength":128,"description":"IV for cipher text, base64 encoded."},"cipher_text":{"type":"string","maxLength":240,"description":"Xchacha20 secret key, encrypted with keychain, base64 encoded"}},"type":"object","required":["cipher_text","iv"],"title":"SurveySecretKeyModel"},"SurveyKeypairModel":{"properties":{"public_key":{"$ref":"#/components/schemas/SurveyKeypairCipherModel"},"private_key":{"$ref":"#/components/schemas/SurveyKeypairCipherModel"}},"type":"object","required":["private_key","public_key"],"title":"SurveyKeypairModel"},"SurveyModel":{"properties":{"title":{"$ref":"#/components/schemas/TitleModel"},"description":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/SurveyDescriptionModel"}]},"questions":{"items":{"$ref":"#/components/schemas/SurveyQuestionModel"},"type":"array","maxItems":128},"signature":{"type":"string","maxLength":128},"requires_login":{"type":"boolean"},"proxy_block":{"type":"boolean"},"allow_multiple_submissions":{"type":"boolean"},"closed":{"oneOf":[{"type":"boolean"},{"type":"string","format":"date-time"}]},"requires_captcha":{"type":"boolean"},"hex_color":{"oneOf":[{"type":"null"},{"type":"string"}],"pattern":"^[0-9a-fA-F]{6}$"},"algorithms":{"type":"string","description":"Encryption algorithms used for survey"},"sign_keypair":{"$ref":"#/components/schemas/SurveySignKeyPairModel"},"secret_key":{"$ref":"#/components/schemas/SurveySecretKeyModel"},"keypair":{"$ref":"#/components/schemas/SurveyKeypairModel"},"ip":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/SurreyCreateIpModel"}]},"created":{"type":"string","format":"date-time"},"id":{},"user_id":{},"responses_count":{"type":"integer"}},"type":"object","required":["created","id","keypair","questions","secret_key","sign_keypair","signature","title","user_id"],"title":"SurveyModel"},"SurveyCreateModel":{"properties":{"title":{"$ref":"#/components/schemas/TitleModel"},"description":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/SurveyDescriptionModel"}]},"questions":{"items":{"$ref":"#/components/schemas/SurveyQuestionModel"},"type":"array","maxItems":128},"signature":{"type":"string","maxLength":128},"requires_login":{"type":"boolean"},"proxy_block":{"type":"boolean"},"allow_multiple_submissions":{"type":"boolean"},"closed":{"oneOf":[{"type":"boolean"},{"type":"string","format":"date-time"}]},"requires_captcha":{"type":"boolean"},"hex_color":{"oneOf":[{"type":"null"},{"type":"string"}],"pattern":"^[0-9a-fA-F]{6}$"},"algorithms":{"type":"string","description":"Encryption algorithms used for survey"},"sign_keypair":{"$ref":"#/components/schemas/SurveySignKeyPairModel"},"secret_key":{"$ref":"#/components/schemas/SurveySecretKeyModel"},"keypair":{"$ref":"#/components/schemas/SurveyKeypairModel"},"ip":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/SurreyCreateIpModel"}]}},"type":"object","required":["keypair","questions","secret_key","sign_keypair","signature","title"],"title":"SurveyCreateModel"}},"securitySchemes":{"BearerToken":{"type":"http","description":"JWT cookie-based authentication and authorization.","name":"token","in":"cookie","scheme":"Bearer","bearerFormat":"JWT"}}},"security":[{"BearerToken":[]}]}